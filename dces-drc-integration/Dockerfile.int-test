FROM amazoncorretto:17-alpine
RUN mkdir -p /opt/laa-dces-drc-integration/
WORKDIR /opt/laa-dces-drc-integration/

COPY dces-drc-integration /opt/laa-dces-drc-integration/dces-drc-integration
COPY build.gradle /opt/laa-dces-drc-integration/
COPY settings.gradle /opt/laa-dces-drc-integration/
COPY gradlew /opt/laa-dces-drc-integration/
COPY gradlew.bat /opt/laa-dces-drc-integration/
COPY gradle /opt/laa-dces-drc-integration/gradle

RUN addgroup -S appgroup && adduser -u 1001 -S appuser -G appgroup
RUN chmod -R 777 /home/api-test-suite/
USER 1001

ENTRYPOINT ["/bin/sh"]